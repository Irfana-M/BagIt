<%-include("../../views/partials/user/header")%>

    <style>
      /* General Body Styling */
      body {
        background: #1A1E2A; /* Dark Slate Blue */
        font-family: 'Poppins', sans-serif;
        color: #333333; /* Dark Gray */
        line-height: 1.6;
      }

      /* Confirmation Message Styling */
      .title_confirmation {
        font-size: 42px;
        font-weight: 600;
        color: #FFFFFF; /* White text on gradient */
        text-align: center;
        margin-bottom: 50px;
        padding: 25px;
        background: linear-gradient(90deg, #4A90E2, #0d5eaf); /* Blue to Green */
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        animation: fadeIn 1s ease-in-out;
      }

      /* Order Details Section */
      .order_details {
        background: #FFFFFF; /* White */
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
        margin-top: 30px;
        transition: transform 0.3s ease;
      }

      .order_details:hover {
        transform: translateY(-5px);
      }

      .details_item h4 {
        font-size: 22px;
        font-weight: 600;
        color: #4A90E2; /* Bright Blue */
        margin-bottom: 20px;
        padding-bottom: 10px;
        border-bottom: 2px solid #172c1e; /* Emerald Green */
      }

      .details_item ul {
        list-style: none;
        padding: 0;
      }

      .details_item ul li {
        margin: 12px 0;
        font-size: 16px;
        color: #666666; /* Medium Gray */
        display: flex;
        justify-content: space-between;
        background: #F7F9FC; /* Light Gray-Blue */
        padding: 10px;
        border-radius: 8px;
        transition: background 0.3s ease;
      }

      .details_item ul li:hover {
        background: #E8ECEF; /* Slightly darker gray */
      }

      .details_item ul li a {
        color: #666666; /* Medium Gray */
        text-decoration: none;
        width: 100%;
        display: flex;
        justify-content: space-between;
      }

      .details_item ul li a span {
        font-weight: 500;
        color: #4A90E2; /* Bright Blue */
      }

      /* Order Details Table */
      .order_details_table {
        margin-top: 40px;
      }

      .order_details_table h2 {
        font-size: 28px;
        font-weight: 600;
        color: #FFFFFF; /* White on dark background */
        margin-bottom: 20px;
        text-align: center;
      }

      .order_details_table h2 u {
        text-decoration: none;
        border-bottom: 3px solid #0d5eaf; /* Emerald Green */
      }

      .order_details_table h3 {
        font-size: 20px;
        font-weight: 500;
        color: #0d5eaf; /* Light Gray for contrast */
        text-align: center;
        margin-bottom: 20px;
      }

      .order_details_table table {
        width: 100%;
        margin-top: 20px;
        border-collapse: separate;
        border-spacing: 0;
        background: #FFFFFF; /* White */
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .order_details_table th,
      .order_details_table td {
        text-align: left;
        padding: 15px 20px;
        border-bottom: 1px solid #E8ECEF; /* Light Gray */
      }

      .order_details_table th {
        background: linear-gradient(90deg, #4A90E2, #0d5eaf); /* Blue to Green */
        color: #FFFFFF; /* White */
        font-weight: 600;
        text-transform: uppercase;
        font-size: 14px;
      }

      .order_details_table td {
        font-size: 16px;
        color: #333333; /* Dark Gray */
      }

      .order_details_table h4 {
        font-weight: 600;
        color: #333333; /* Dark Gray */
        margin: 0;
      }

      .order_details_table p {
        font-size: 16px;
        color: #666666; /* Medium Gray */
        margin: 0;
      }

      .order_details_table .text-success {
        color: #0d5eaf; /* Emerald Green */
        font-weight: 500;
      }

      .order_details_table .btn {
        background: linear-gradient(90deg, #4A90E2, #0d5eaf); /* Blue to Green */
        color: #FFFFFF; /* White */
        padding: 12px 30px;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 500;
        text-transform: uppercase;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .order_details_table .btn:hover {
        background: linear-gradient(90deg, #357ABD, #0d5eaf); /* Darker Blue to Green */
        transform: translateY(-2px);
        box-shadow: 0 7px 20px rgba(0, 0, 0, 0.4);
      }

      .paymentClass {
        color: #0d5eaf; /* Emerald Green */
        font-weight: 600;
        font-style: italic;
      }

      /* Footer Styling */
      footer {
        background: #2C3E50; /* Dark Blue-Gray */
        color: #E8ECEF; /* Light Gray */
        padding: 40px;
        margin-top: 50px;
        border-top: 4px solid #4A90E2; /* Bright Blue */
      }

      footer .single-footer-widget {
        margin-bottom: 30px;
      }

      footer h6 {
        font-size: 20px;
        font-weight: 600;
        color: #FFFFFF; /* White */
        margin-bottom: 20px;
      }

      footer .social-icons a {
        color: #E8ECEF; /* Light Gray */
        font-size: 22px;
        margin: 0 15px;
        transition: all 0.3s ease;
      }

      footer .social-icons a:hover {
        color: #0d5eaf; /* Emerald Green */
        transform: scale(1.2);
      }

      /* Animation */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* Responsive Adjustments */
      @media (max-width: 768px) {
        .title_confirmation {
          font-size: 32px;
          padding: 20px;
        }
        .order_details {
          padding: 20px;
        }
        .order_details_table h2 {
          font-size: 24px;
        }
        .order_details_table th,
        .order_details_table td {
          padding: 10px;
          font-size: 14px;
        }
        .order_details_table .btn {
          padding: 10px 20px;
          font-size: 14px;
        }
      }
    </style>


    <section class="banner-area organic-breadcrumb">
      <div class="container">
        <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
          <div class="col-first">
            <h1>Confirmation</h1>
            <nav class="d-flex align-items-center">
              <a href="/">Home<span class="lnr lnr-arrow-right"></span></a>
              <a href="/checkout">Checkout</a>
            </nav>
          </div>
        </div>
      </div>
    </section>

    <section class="order_details section_gap">
      <div class="container">
        <h1 class="title_confirmation">
          Thank you for your order. Your transaction has been completed successfully.
        </h1>
        <div class="row order_d_inner">
          <div class="col-lg-6 display-flex align-content-center">
            <div class="details_item">
              <% if (selectedAddress) { %>
              <h4>Shipping Address</h4>
              <ul class="list">
                <li><a href="#"><span>Address Type</span><%= selectedAddress.addressType %></a></li>
                <li><a href="#"><span>City</span><%= selectedAddress.city %></a></li>
                <li><a href="#"><span>Landmark</span><%= selectedAddress.landMark %></a></li>
                <li><a href="#"><span>State</span><%= selectedAddress.state %></a></li>
                <li><a href="#"><span>Pincode</span><%= selectedAddress.pincode %></a></li>
                <li><a href="#"><span>Phone</span><%= selectedAddress.phone %></a></li>
                <li><a href="#"><span>Alternate Phone</span><%= selectedAddress.altPhone %></a></li>
              </ul>
              <% } else { %>
              <p>No shipping address available.</p>
              <% } %>
            </div>
          </div>
          <div class="col-lg-6">
            <% cartItems.forEach(item => { %>
            <div class="details_item">
              <img
                class="img-fluid"
                style="height: 30%; width: 30%; border-radius: 10px;"
                src="uploads/product-images/<%= item.productId.productImage[0] %>"
                alt="Product Image"
              />
            </div>
            <% }); %>
          </div>
        </div>
        <div class="order_details_table">
          <h2><u>Order Details</u></h2>
          <h2>Order Method: <span class="paymentClass"><%= paymentMethod %></span></h2>
          <h3>Payment Status: <span class="paymentClass"><%= paymentStatus %></span></h3>
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Product</th>
                  <th scope="col">Quantity</th>
                  <th scope="col">Total</th>
                </tr>
              </thead>
              <tbody>
                <% if (cartItems) { %>
                <% cartItems.forEach(item => { %>
                <tr>
                  <td><p><%= item.productId.productName %></p></td>
                  <td><h5>x <%= item.quantity %></h5></td>
                  <td><p>₹<%= (item.productId.salePrice * item.quantity).toFixed(2) %></p></td>
                </tr>
                <% }); %>
        
                <tr>
                  <td><h4>Total Price</h4></td>
                  <td></td>
                  <td><p>₹<%= totalOriginalPrice.toFixed(2) %></p></td>
                </tr>
        
                <% if (Discount > 0) { %>
                <tr>
                  <td><h4>Discount</h4></td>
                  <td></td>
                  <td><p class="text-success">- ₹<%= totalDiscount.toFixed(2) %></p></td>
                </tr>
                <% } %>
        
                <% if (couponDiscount > 0) { %>
                <tr>
                  <td><h4>Coupon Discount</h4></td>
                  <td></td>
                  <td><p class="text-success">- ₹<%= couponDiscount.toFixed(2) %></p></td>
                </tr>
                <% } %>
        
                <% const shippingChargeCalc = totalPrice < 1000 ? 50 : 0; %>
                <tr>
                  <td><h4>Shipping Charge</h4></td>
                  <td></td>
                  <td><p>₹<%= shippingChargeCalc.toFixed(2) %></p></td>
                </tr>
        
                <% let gst = (totalPrice * 0.18).toFixed(2); %>
                <tr>
                  <td><h4>GST (18%)</h4></td>
                  <td></td>
                  <td><p>₹<%= gst %></p></td>
                </tr>
        
                <tr>
                  <td><h4>Grand Total</h4></td>
                  <td></td>
                  <td><p><strong>₹<%= (parseFloat(totalPrice) - parseFloat(couponDiscount) + parseFloat(shippingChargeCalc) + parseFloat(gst)).toFixed(2) %></strong></p></td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-lg-6 text-center">
            <a class="btn btn-primary" href="/">Back to Shopping</a>
          </div>
          <div class="col-lg-6 text-center">
            <a class="btn btn-primary" href="/orders">View Your Orders</a>
          </div>
        </div>
      </div>
    </section>


    <script>
      history.pushState(null, null, location.href);
      window.onpopstate = function () {
        history.go(1);
      };
    </script>
 <%-include("../../views/partials/user/footer")%>>