<!DOCTYPE html>
<html lang="zxx" class="no-js">

<head>
	<!-- Mobile Specific Meta -->
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<!-- Favicon-->
	<link rel="shortcut icon" href="img/fav.png">
	<!-- Author Meta -->
	<meta name="author" content="CodePixar">
	<!-- Meta Description -->
	<meta name="description" content="">
	<!-- Meta Keyword -->
	<meta name="keywords" content="">
	<!-- meta character set -->
	<meta charset="UTF-8">
	<!-- Site Title -->
	<title>BAG IT Shopping</title>

	<!--
            CSS
            ============================================= -->
	<link rel="stylesheet" href="css/linearicons.css">
	<link rel="stylesheet" href="css/owl.carousel.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/themify-icons.css">
	<link rel="stylesheet" href="css/nice-select.css">
	<link rel="stylesheet" href="css/nouislider.min.css">
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/main.css">
</head>

<body id="category">

	<!-- Start Header Area -->
	<header class="header_area sticky-header">
		<div class="main_menu">
			<nav class="navbar navbar-expand-lg navbar-light main_box">
				<div class="container">
					<!-- Brand and toggle get grouped for better mobile display -->
					<a class="navbar-brand logo_h" href="/"><img src="img/logo.png" alt=""></a>
					<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
					 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<!-- Collect the nav links, forms, and other content for toggling -->
					<div class="collapse navbar-collapse offset" id="navbarSupportedContent">
						<ul class="nav navbar-nav menu_nav ml-auto">
							<li class="nav-item"><a class="nav-link" href="/">Home</a></li>
							<li class="nav-item submenu dropdown active">
								<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
								 aria-expanded="false">Shop</a>
								<ul class="dropdown-menu">
									<li class="nav-item active"><a class="nav-link" href="#">Shop Category</a></li>
									<!-- <li class="nav-item"><a class="nav-link" href="single-product.html">Product Details</a></li> -->
									<li class="nav-item"><a class="nav-link" href="checkout.html">Product Checkout</a></li>
									<li class="nav-item"><a class="nav-link" href="cart.html">Shopping Cart</a></li>
									<li class="nav-item"><a class="nav-link" href="confirmation.html">Confirmation</a></li>
								</ul>
							</li>
							<li class="nav-item submenu dropdown">
								<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
								 aria-expanded="false">Blog</a>
								<ul class="dropdown-menu">
									<li class="nav-item"><a class="nav-link" href="blog.html">Blog</a></li>
									<li class="nav-item"><a class="nav-link" href="single-blog.html">Blog Details</a></li>
								</ul>
							</li>
							<li class="nav-item submenu dropdown">
								<a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
								 aria-expanded="false">Pages</a>
								<ul class="dropdown-menu">
									<li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
									<li class="nav-item"><a class="nav-link" href="tracking.html">Tracking</a></li>
									<li class="nav-item"><a class="nav-link" href="elements.html">Elements</a></li>
								</ul>
							</li>
							<li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							<li class="nav-item"><a href="#" class="cart"><span class="ti-bag"></span></a></li>
							<li class="nav-item">
								<button class="search"><span class="lnr lnr-magnifier" id="search"></span></button>
							</li>
						</ul>
					</div>
				</div>
			</nav>
		</div>
		<div class="search_input" id="search_input_box">
			<div class="container">
				<form action="/search" method="POST" class="d-flex justify-content-between">
					<input type="text" class="form-control" name="query" id="search_input" placeholder="Search Here">
					<button type="submit" class="btn"></button>
					<span class="lnr lnr-cross" id="close_search" title="Close Search"></span>
				</form>
			</div>
		</div>
	</header>
	<!-- End Header Area -->
     <!-- Start Banner Area -->
<section class="banner-area organic-breadcrumb">
    <div class="container">
        <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
            <div class="col-first">
                <h1>Product Details Page</h1>
                <nav class="d-flex align-items-center">
                    <a href="/">Home<span class="lnr lnr-arrow-right"></span></a>
                    <a href="/shop">Shop<span class="lnr lnr-arrow-right"></span></a>
                    <a href="#">product-details</a>
                </nav>
            </div>
        </div>
    </div>
</section>
<!-- End Banner Area -->
<style>
 .otp-container {
   display: flex;
   flex-direction: column;
   align-items: center;
   padding: 20px;
   border: 1px solid #ddd;
   border-radius: 10px;
   background-color: #f9f9f9;
   width: 100%;
   max-width: 400px;
   margin: 0 auto;
   box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
 }


 .otp-timer-wrapper {
   display: flex;
   justify-content: center;
   align-items: center;
   margin-bottom: 10px;
   width: 100%;
 }


 .otp-timer {
   display: flex;
   justify-content: center;
   align-items: center;
   width: 60px;
   height: 60px;
   border-radius: 50%;
   background-color: #f0f0f0;
   font-size: 14px;
   color: black;
   text-align: center;
 }


 .form-group {
   width: 100%;
   text-align: center;
 }


 .btn-primary {
   margin-top: 15px;
 }


 .resend-button {
   margin-top: 10px;
 }
</style>


<div class="container col-4 login_wrap widget-taber-content p-30 background-white border-radius-5 mt-30">
 <div class="padding_eight_all bg-white">
   <div class="heading_s1">
     <h3 class="mb-30 text-center">Email Verification</h3>
   </div>
   <div class="otp-container">
     <form onsubmit="return validateOtpForm()">
       <div class="form-group">
         <label for="otp">Enter OTP:</label>
         <input type="text" id="otp" name="otp" class="form-control" required>
       </div>
       <div class="form-group">
         <button type="submit" class="btn btn-primary">Verify OTP</button>
       </div>
     </form>
     <div class="form-group otp-timer-wrapper">
       <div class="otp-timer" id="otpTimer"></div>
     </div>
     <div class="form-group">
       <button type="button" class="btn btn-link resend-button" onclick="resendOtp()">Resend OTP</button>
     </div>
     <%if(locals.message && message.length >0){%>
       <div class="alert alert-danger mt-3">
        <%=message%>
       </div>
       <%}%>
   </div>
   <div class="text-muted text-center pt-25">
     Already verified? <a href="/login">Login now</a>
   </div>
 </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    let otpTimerInterval;
    let timer = 60;
	function updateTimerColor(percentage){
		const timerElement = document.getElementById('otpTimer');
		if(percentage>50){
			timerElement.style.backgroundColor = '#28a745';
		}else if(percentage>25){
			timerElement.style.backgroundColor = '#ffc107';
		}else{
			timerElement.style.backgroundColor = '#dc3545';
		}
	}

    function startOtpTimer(){
        const timerElement = document.getElementById('otpTimer');
        otpTimerInterval = setInterval(function(){
            const minutes = Math.floor(timer/60);
            const seconds = timer % 60;
            timerElement.textContent = `${minutes}:${seconds < 10?'0':''}${seconds}`;
			updateTimerColor((timer/60)*100);
            if(--timer<0){
				clearInterval(otpTimerInterval);
				timerElement.textContent = 'Expired';
				timerElement.style.backgroundColor = 'red';
			}
        },1000);
    }
	initializeOtpTimer();

    function initializeOtpTimer(){
        clearInterval(otpTimerInterval);
        timer = 60;
        startOtpTimer();
    }

	function validateOtpForm(){
		const otpInput = document.getElementById('otp').value;
		$.ajax({
			type:'POST',
			url:'/verify-passForgot-otp',
			data:{otp:otpInput},
			success: function(response){
				if(response.success){
					Swal.fire({
						icon:'success',
						title:'OTP verified successfully',
						showConfirmButton:false,
						timer:1500
					}).then(()=>{
						window .location.href = response.redirectUrl;
					})
				}else{
					Swal.fire({
						icon:'error',
						title:'Invalid OTP',
						text:response.message
					})
				}
			},
			error: function (){
				Swal.fire({
					icon:'error',
					title:'Error',
					text:'Failed to verify OTP.Please try again.'
				})
			}
		});
		return false;
	}

function resendOtp(){
	clearInterval(otpTimerInterval);
	timer =60;
	startOtpTimer();
	$.ajax({
		type:'POST',
		url:'resend-forgot-otp',
		success:function(response){
			if(response.success){
				Swal.fire({
					icon:'success',
					title:'Resend OTP successful',
					showConfirmButton:false,
					timer:1500
				})
			}else{
				Swal.fire({
					icon:'error',
					title:Error,
					text:'Failed to resend OTP,Please try again.'
				})
			}
		},
		error:function(){
			Swal.fire({
				icon:'error',
				title:'Error',
				text:'Failed to resend OTP, Please try again'
			})
		}
	})
}




</script>
<%- include("../../views/partials/user/footer") %>





